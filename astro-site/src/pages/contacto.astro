---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/nav/Header.astro';
import ContactOffices from '../components/contact/ContactOffices.astro';
import Footer from '../components/home/Footer.astro';
import WhatsAppFloat from '../components/WhatsAppFloat.astro';
import BackToTop from '../components/BackToTop.astro';
---

<BaseLayout title="Contacto | JDV Abogados" description="Contáctenos en nuestras oficinas en Las Condes, Santiago. Edificio World Trade Center y Av Apoquindo 6410. Agende su consulta legal hoy.">
  <Header />

  <!-- Hero - Premium style matching Quiénes Somos -->
  <section class="relative pt-36 pb-20 bg-[var(--blue-deeper)] text-white overflow-hidden">
    <!-- Mesh Gradient Orbs -->
    <div class="absolute inset-0 pointer-events-none overflow-hidden">
      <div class="absolute top-[-20%] left-[-10%] w-[70%] h-[70%] rounded-full bg-[radial-gradient(circle,rgba(59,130,246,0.4)_0%,transparent_70%)] blur-[120px] animate-[floatOrb_20s_ease-in-out_infinite]"></div>
      <div class="absolute bottom-[-30%] right-[-10%] w-[60%] h-[60%] rounded-full bg-[radial-gradient(circle,rgba(29,78,216,0.4)_0%,transparent_70%)] blur-[100px] animate-[floatOrb_25s_ease-in-out_infinite_reverse]"></div>
      <div class="absolute top-[20%] right-[20%] w-[40%] h-[40%] rounded-full bg-[radial-gradient(circle,rgba(201,162,84,0.15)_0%,transparent_70%)] blur-[80px] animate-[floatOrb_15s_ease-in-out_5s_infinite]"></div>
    </div>

    <!-- Noise Texture -->
    <div class="absolute inset-0 opacity-[0.03] pointer-events-none">
      <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg">
        <filter id="contactNoise"><feTurbulence baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter>
        <rect width="100%" height="100%" filter="url(#contactNoise)"/>
      </svg>
    </div>

    <!-- Gradient Overlay -->
    <div class="absolute inset-0 bg-gradient-to-br from-[rgba(12,35,64,0.98)] via-[rgba(12,35,64,0.94)] to-[rgba(26,77,122,0.88)] pointer-events-none"></div>

    <div class="container relative text-center contact-hero-content">
      <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 backdrop-blur-lg text-white/90 text-sm font-semibold mb-6 border border-white/20 shadow-lg">
        <i class="fas fa-map-marker-alt text-[var(--gold)]"></i>
        Dos ubicaciones en Las Condes
      </span>
      <h1 class="text-[clamp(2.5rem,5vw,4rem)] font-black mb-4 tracking-[-0.02em] drop-shadow-[0_2px_4px_rgba(0,0,0,0.3)]" style="font-family: var(--font-display);">
        <span class="bg-gradient-to-br from-[#FDFBF7] via-[#E5D5AA] to-[#C9A254] bg-clip-text text-transparent">Contacto</span>
      </h1>
      <p class="text-white/70 text-lg max-w-2xl mx-auto">
        Estamos disponibles para atenderle en nuestras oficinas de Las Condes o a través de nuestros canales digitales.
      </p>
    </div>
  </section>

  <ContactOffices />
  <Footer />
  <WhatsAppFloat />
  <BackToTop />
</BaseLayout>

<style>
  @keyframes floatOrb {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(30px, -20px) scale(1.05); }
    66% { transform: translate(-20px, 15px) scale(0.95); }
  }

  /* Hero entrance animation */
  .contact-hero-content {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
                transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .contact-hero-content.visible {
    opacity: 1;
    transform: translateY(0);
  }

  @media (prefers-reduced-motion: reduce) {
    .contact-hero-content {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }
</style>

<script>
  const initContactHeroAnimation = () => {
    const heroContent = document.querySelector('.contact-hero-content');
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    if (prefersReducedMotion) {
      heroContent?.classList.add('visible');
      return;
    }

    setTimeout(() => {
      heroContent?.classList.add('visible');
    }, 100);
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initContactHeroAnimation);
  } else {
    initContactHeroAnimation();
  }
</script>
