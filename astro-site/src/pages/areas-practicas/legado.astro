---
import { getEntry } from 'astro:content';
import PracticeLayout from '../../layouts/PracticeLayout.astro';
import Header from '../../components/nav/Header.astro';
import PracticeBreadcrumbs from '../../components/practice/PracticeBreadcrumbs.astro';
import PracticeHero from '../../components/practice/PracticeHero.astro';
import PracticeTrustBar from '../../components/practice/PracticeTrustBar.astro';
import PracticeTarget from '../../components/practice/PracticeTarget.astro';
import PracticePainPoints from '../../components/practice/PracticePainPoints.astro';
import PracticeObjective from '../../components/practice/PracticeObjective.astro';
import PracticeResults from '../../components/practice/PracticeResults.astro';
import PracticeServicesIncluded from '../../components/practice/PracticeServicesIncluded.astro';
import PracticeProcess from '../../components/practice/PracticeProcess.astro';
import PracticeContent from '../../components/practice/PracticeContent.astro';
import PracticeFAQ from '../../components/practice/PracticeFAQ.astro';
import PracticeTestimonials from '../../components/practice/PracticeTestimonials.astro';
import PracticeRelatedServices from '../../components/practice/PracticeRelatedServices.astro';
import PracticeFinalCTA from '../../components/practice/PracticeFinalCTA.astro';
import Footer from '../../components/home/Footer.astro';
import Modal from '../../components/home/Modal.astro';
import WhatsAppFloat from '../../components/WhatsAppFloat.astro';
import BackToTop from '../../components/BackToTop.astro';

// Obtener contenido de la colecci贸n
const practiceEntry = await getEntry('practices', 'legado');

if (!practiceEntry) {
  throw new Error('No se encontr贸 el contenido para Legado');
}

const { data, render } = practiceEntry;
const { Content } = await render();
---

<PracticeLayout
  title={data.seo.title}
  description={data.seo.description}
  canonical={data.seo.canonical}
>
  <!-- Navegaci贸n reutilizada del Home -->
  <Header />

  <!-- Breadcrumbs -->
  <PracticeBreadcrumbs areaName={data.hero.h1 ?? ''} areaSlug={data.slug ?? ''} breadcrumbTitle={data.hero.breadcrumbTitle} />

  <!-- Hero Section -->
  <PracticeHero
    badge={data.hero.badge}
    h1={data.hero.h1}
    tagline={data.hero.tagline}
    image={data.hero.image}
  />

  <!-- Trust Bar -->
  <PracticeTrustBar items={data.trust} />

  <!-- Target Audience -->
  <PracticeTarget items={data.target} />

  <!-- Pain Points -->
  <PracticePainPoints points={data.painPoints} />

  <!-- Objective / Commitment -->
  <PracticeObjective
    text={data.objective.text}
    commitments={data.objective.commitments}
  />

  <!-- Results -->
  <PracticeResults items={data.results} />

  <!-- Services Included -->
  <PracticeServicesIncluded items={data.servicesIncluded} />

  <!-- Process -->
  <PracticeProcess steps={data.process} />

  <!-- Markdown Content -->
  <PracticeContent headerTitle="Informaci贸n Detallada" headerBadge="Legado">
    <Content />
  </PracticeContent>

  <!-- FAQ -->
  <PracticeFAQ items={data.faq} areaName={data.hero.h1} />

  <!-- Testimonials -->
  <PracticeTestimonials areaName={data.hero.h1} />

  <!-- Related Services -->
  <PracticeRelatedServices currentSlug={data.slug} />

  <!-- Final CTA -->
  <PracticeFinalCTA
    headline={data.finalCta.headline}
    text={data.finalCta.text}
    button={data.finalCta.button}
  />

  <!-- Footer reutilizado del Home -->
  <Footer />

  <!-- Modal reutilizado del Home -->
  <Modal />

  <!-- WhatsApp Float Button -->
  <WhatsAppFloat />

  <!-- Back to Top Button -->
  <BackToTop />
</PracticeLayout>

<!-- Estilos encapsulados en PracticeContent.astro -->
