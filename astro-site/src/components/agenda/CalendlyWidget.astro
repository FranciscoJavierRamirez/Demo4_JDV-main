---
---

<div id="calendly-section" class="calendly-wrapper">
  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-5 px-1">
    <h2 class="font-[var(--font-display)] text-[clamp(1.25rem,2.5vw,1.625rem)] font-bold text-white">
      Seleccione su horario
    </h2>
    <span class="inline-flex items-center gap-2 text-sm font-medium text-emerald-300 bg-emerald-500/10 px-4 py-2 rounded-full border border-emerald-500/20 backdrop-blur-sm self-start sm:self-auto">
      <span class="relative flex h-2.5 w-2.5">
        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
        <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-400"></span>
      </span>
      Disponible
    </span>
  </div>

  <!-- Widget Container -->
  <div class="relative rounded-2xl sm:rounded-3xl overflow-hidden border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.3),0_0_80px_rgba(59,130,246,0.08)] bg-white/[0.03] backdrop-blur-sm">
    <!-- Top accent line -->
    <div class="h-[2px] bg-gradient-to-r from-transparent via-[var(--gold)] to-transparent opacity-40"></div>

    <!-- Loading skeleton -->
    <div id="calendlyLoader" class="absolute inset-0 z-10 flex items-center justify-center bg-[#0c2340]/90 backdrop-blur-sm">
      <div class="flex flex-col items-center gap-4">
        <div class="relative">
          <div class="w-12 h-12 rounded-full border-[3px] border-white/10 border-t-[var(--gold)] animate-spin"></div>
          <div class="absolute inset-0 w-12 h-12 rounded-full border-[3px] border-transparent border-b-[var(--blue-light)] animate-spin" style="animation-direction: reverse; animation-duration: 1.5s;"></div>
        </div>
        <span class="text-sm text-white/60 font-medium">Cargando calendario...</span>
      </div>
    </div>

    <!-- Calendly inline widget -->
    <div
      class="calendly-inline-widget"
      data-url="https://calendly.com/jacquelinedelvalle-jdvabogados/30min?hide_gdpr_banner=1&primary_color=B8860B"
      style="min-width:300px; width:100%;"
    ></div>
  </div>

  <!-- Helper text mobile -->
  <p class="mt-3 text-center text-xs text-white/40 sm:hidden">
    <i class="fas fa-hand-pointer mr-1"></i> Deslice para ver m치s horarios
  </p>
</div>

<style>
  /* ====================================
     ALTURA RESPONSIVA DEL IFRAME CALENDLY
     Optimizado para mostrar calendario COMPLETO sin scroll
     ==================================== */

  .calendly-inline-widget {
    /* M칩vil peque침o */
    height: 1100px;
    min-height: 1100px;
  }

  /* M칩vil mediano (>= 480px) */
  @media (min-width: 480px) {
    .calendly-inline-widget {
      height: 1050px;
      min-height: 1050px;
    }
  }

  /* Tablet (>= 640px) */
  @media (min-width: 640px) {
    .calendly-inline-widget {
      height: 1000px;
      min-height: 1000px;
    }
  }

  /* Desktop (>= 1024px) */
  @media (min-width: 1024px) {
    .calendly-inline-widget {
      height: 950px;
      min-height: 950px;
    }
  }

  /* Desktop grande (>= 1280px) */
  @media (min-width: 1280px) {
    .calendly-inline-widget {
      height: 900px;
      min-height: 900px;
    }
  }

  .calendly-wrapper {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.7s cubic-bezier(0.16, 1, 0.3, 1), transform 0.7s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .calendly-wrapper.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script is:inline>
  // Intersection Observer for scroll reveal
  (function() {
    var wrapper = document.querySelector('.calendly-wrapper');
    if (wrapper && 'IntersectionObserver' in window) {
      var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      observer.observe(wrapper);
    } else if (wrapper) {
      wrapper.classList.add('visible');
    }
  })();

  // Hide loader when Calendly widget loads
  window.addEventListener('message', function(e) {
    if (e.data.event && e.data.event.indexOf('calendly') === 0) {
      var loader = document.getElementById('calendlyLoader');
      if (loader) {
        loader.style.opacity = '0';
        loader.style.transition = 'opacity 0.4s ease';
        setTimeout(function() { loader.style.display = 'none'; }, 400);
      }
    }
  });
</script>
