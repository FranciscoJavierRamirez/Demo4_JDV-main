---
import { getEntry } from 'astro:content';

const faqData = await getEntry('faq', 'home');
const { sectionTitle, sectionSubtitle, questions } = faqData.data;
---

<!-- FAQ Section -->
<section class="faq-section" id="faq">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">{sectionTitle}</h2>
      <p class="section-subtitle">{sectionSubtitle}</p>
    </div>

    <div class="faq-container">
      {questions.map(faq => (
        <div class="faq-item" data-faq={faq.id}>
          <button class="faq-question" onclick={`toggleFaq(${faq.id})`}>
            <span>{faq.question}</span>
            <i class="fas fa-chevron-down faq-icon"></i>
          </button>
          <div class="faq-answer">
            <p set:html={faq.answer}></p>
          </div>
        </div>
      ))}
    </div>

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": questions.map(faq => ({
        "@type": "Question",
        "name": faq.question,
        "acceptedAnswer": {
          "@type": "Answer",
          "text": faq.answer.replace(/<[^>]*>/g, '')
        }
      }))
    })} />
  </div>
</section>
