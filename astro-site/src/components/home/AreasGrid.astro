---
import { getEntry } from 'astro:content';

const areasData = await getEntry('areas', 'home');
const { sectionTitle, sectionSubtitle, areas } = areasData.data;
---

<section id="areas" class="relative py-24 bg-gradient-to-br from-white via-[#f0f9ff] to-[#faf5ff] overflow-hidden">
  <!-- Decorative mesh gradient background -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-1/4 left-1/4 w-[500px] h-[500px] rounded-full blur-[150px] opacity-[0.06] bg-[radial-gradient(circle,var(--blue-primary)_0%,transparent_70%)]"></div>
    <div class="absolute bottom-1/4 right-1/4 w-[400px] h-[400px] rounded-full blur-[120px] opacity-[0.05] bg-[radial-gradient(circle,var(--gold)_0%,transparent_70%)]"></div>
    <!-- Subtle grid pattern -->
    <div class="absolute inset-0 opacity-[0.02]" style="background-image: linear-gradient(var(--gray-400) 1px, transparent 1px), linear-gradient(90deg, var(--gray-400) 1px, transparent 1px); background-size: 60px 60px;"></div>
  </div>
  <div class="container relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="font-[var(--font-display)] text-[clamp(2rem,4vw,3rem)] font-extrabold text-[var(--gray-900)] mb-5 tracking-[-0.02em]">
        {sectionTitle}
      </h2>
      <p class="text-[clamp(1.125rem,2vw,1.25rem)] text-[var(--gray-600)] max-w-[700px] mx-auto leading-relaxed">
        {sectionSubtitle}
      </p>
    </div>

    <!-- Bento Grid Layout -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 auto-rows-[minmax(280px,auto)]">
      {areas.map((area, index) => (
        <a 
          href={area.link}
          class={`bento-card group relative p-8 rounded-[24px] border border-[var(--gray-200)] transition-all duration-300 overflow-hidden cursor-pointer hover:-translate-y-1 hover:shadow-2xl flex flex-col justify-between
            ${index === 0 || index === 1 ? 'md:col-span-2 lg:col-span-2 bg-gradient-to-br from-white to-[var(--blue-50)]' : 'col-span-1 bg-white'}
          `}
          style={`transition-delay: ${index * 50}ms`}
        >
          <!-- Spotlight Effect Layer -->
          <div class="spotlight absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-0"></div>
          
          <div class="relative z-10">
            <!-- Icon -->
            <div class={`w-16 h-16 flex items-center justify-center rounded-2xl mb-6 transition-all duration-300 group-hover:scale-110 group-hover:rotate-[-5deg] shadow-lg
              ${index === 0 || index === 1 ? 'bg-gradient-to-br from-[var(--blue-primary)] to-[var(--blue-deeper)] text-white' : 'bg-[var(--gray-50)] text-[var(--blue-primary)] group-hover:bg-[var(--blue-primary)] group-hover:text-white'}
            `}>
              <i class={`${area.icon} text-3xl`}></i>
            </div>
            
            <!-- Content -->
            <div>
              <h3 class={`font-[var(--font-display)] font-bold mb-3 leading-tight group-hover:text-[var(--blue-primary)] transition-colors
                ${index === 0 || index === 1 ? 'text-3xl' : 'text-xl'}
              `}>
                {area.title}
              </h3>
              
              <p class="text-[var(--gray-600)] leading-relaxed mb-6">
                {area.description}
              </p>
            </div>
          </div>
          
          <!-- Action -->
          <div class="relative z-10 flex items-center gap-2 text-[var(--blue-primary)] font-bold text-sm tracking-wide uppercase group-hover:gap-3 transition-all">
            <span>Explorar √Årea</span>
            <i class="fas fa-arrow-right"></i>
          </div>
        </a>
      ))}
    </div>
  </div>
</section>

<style>
  .bento-card {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
  }

  .spotlight {
    background: radial-gradient(
      600px circle at var(--mouse-x) var(--mouse-y),
      rgba(59, 130, 246, 0.1),
      transparent 40%
    );
  }
</style>

<script>
  // Spotlight Effect
  const cards = document.querySelectorAll('.bento-card');
  cards.forEach(card => {
    card.addEventListener('mousemove', (e) => {
      const rect = (card as HTMLElement).getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      (card as HTMLElement).style.setProperty('--mouse-x', `${x}px`);
      (card as HTMLElement).style.setProperty('--mouse-y', `${y}px`);
    });
  });
</script>
