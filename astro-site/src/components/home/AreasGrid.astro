---
import { getEntry } from 'astro:content';

const areasData = await getEntry('areas', 'home');
const { sectionTitle, sectionSubtitle, areas } = areasData.data;
---

<section id="areas" class="relative py-24 bg-gradient-to-br from-white via-[#f0f9ff] to-[#faf5ff] overflow-hidden">
  <!-- Decorative mesh gradient background -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-1/4 left-1/4 w-[500px] h-[500px] rounded-full blur-[150px] opacity-[0.06] bg-[radial-gradient(circle,var(--blue-primary)_0%,transparent_70%)]"></div>
    <div class="absolute bottom-1/4 right-1/4 w-[400px] h-[400px] rounded-full blur-[120px] opacity-[0.05] bg-[radial-gradient(circle,var(--gold)_0%,transparent_70%)]"></div>
    <!-- Subtle grid pattern -->
    <div class="absolute inset-0 opacity-[0.02]" style="background-image: linear-gradient(var(--gray-400) 1px, transparent 1px), linear-gradient(90deg, var(--gray-400) 1px, transparent 1px); background-size: 60px 60px;"></div>
  </div>
  <div class="container relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="font-[var(--font-display)] text-[clamp(2rem,4vw,3rem)] font-extrabold text-[var(--gray-900)] mb-5 tracking-[-0.02em]">
        {sectionTitle}
      </h2>
      <p class="text-[clamp(1.125rem,2vw,1.25rem)] text-[var(--gray-600)] max-w-[700px] mx-auto leading-relaxed">
        {sectionSubtitle}
      </p>
    </div>

    <!-- Bento Grid Layout -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 auto-rows-[minmax(280px,auto)]">
      {areas.map((area, index) => {
        const isFeatured = index === 0 || index === 1;
        return (
          <a 
            href={area.link}
            class={`bento-card group relative p-8 rounded-[24px] border transition-all duration-300 overflow-hidden cursor-pointer hover:-translate-y-2 hover:shadow-2xl flex flex-col justify-between
              ${isFeatured 
                ? 'md:col-span-2 lg:col-span-2 min-h-[340px] border-[var(--blue-primary)]/20' 
                : 'col-span-1 border-[var(--gray-200)]'}
            `}
            style={`transition-delay: ${index * 50}ms`}
          >
            <!-- Background Image Layer -->
            {area.image && (
              <div class="absolute inset-0 z-0">
                <img 
                  src={area.image} 
                  alt=""
                  class={`card-image w-full h-full object-cover transition-all duration-500 group-hover:scale-110
                    ${isFeatured ? 'opacity-40 group-hover:opacity-50' : 'opacity-25 group-hover:opacity-35'}
                  `}
                  loading="lazy"
                />
                <!-- Gradient Overlay - Enhanced for better visibility -->
                <div class={`absolute inset-0 transition-all duration-300
                  ${isFeatured 
                    ? 'bg-gradient-to-br from-white/80 via-white/70 to-[var(--blue-50)]/60' 
                    : 'bg-gradient-to-t from-white via-white/85 to-white/70'}
                `}></div>
              </div>
            )}
            
            <!-- Spotlight Effect Layer -->
            <div class="spotlight absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-[1]"></div>
            
            <div class="relative z-10">
              <!-- Icon -->
              <div class={`w-16 h-16 flex items-center justify-center rounded-2xl mb-6 transition-all duration-300 group-hover:scale-110 group-hover:rotate-[-5deg]
                ${isFeatured 
                  ? 'bg-gradient-to-br from-[var(--blue-primary)] to-[var(--blue-deeper)] text-white shadow-[0_8px_30px_rgba(59,130,246,0.4)]' 
                  : 'bg-white/90 backdrop-blur-sm text-[var(--blue-primary)] shadow-lg border border-[var(--gray-100)] group-hover:bg-[var(--blue-primary)] group-hover:text-white group-hover:border-transparent'}
              `}>
                <i class={`${area.icon} text-3xl`}></i>
              </div>
              
              <!-- Content -->
              <div>
                <h3 class={`font-[var(--font-display)] font-bold mb-3 leading-tight transition-colors
                  ${isFeatured 
                    ? 'text-3xl text-[var(--gray-900)] group-hover:text-[var(--blue-primary)]' 
                    : 'text-xl text-[var(--gray-900)] group-hover:text-[var(--blue-primary)]'}
                `}>
                  {area.title}
                </h3>
                
                <p class={`leading-relaxed mb-6
                  ${isFeatured ? 'text-[var(--gray-700)] text-base' : 'text-[var(--gray-600)] text-sm'}
                `}>
                  {area.description}
                </p>
              </div>
            </div>
            
            <!-- Action -->
            <div class="relative z-10 flex items-center gap-2 text-[var(--blue-primary)] font-bold text-sm tracking-wide uppercase group-hover:gap-3 transition-all">
              <span>Explorar √Årea</span>
              <i class="fas fa-arrow-right transition-transform duration-300 group-hover:translate-x-1"></i>
            </div>
          </a>
        );
      })}
    </div>
  </div>
</section>

<style>
  .bento-card {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
    background: white;
  }

  .bento-card:hover {
    box-shadow: 
      0 25px 50px -12px rgba(0, 0, 0, 0.15),
      0 0 0 1px rgba(59, 130, 246, 0.1);
  }

  /* Featured cards styling */
  .bento-card:nth-child(1),
  .bento-card:nth-child(2) {
    background: linear-gradient(135deg, rgba(255,255,255,0.98) 0%, rgba(239,246,255,0.95) 100%);
  }

  .bento-card:nth-child(1):hover,
  .bento-card:nth-child(2):hover {
    box-shadow: 
      0 30px 60px -15px rgba(59, 130, 246, 0.3),
      0 0 0 1px rgba(59, 130, 246, 0.2);
  }

  .spotlight {
    background: radial-gradient(
      600px circle at var(--mouse-x) var(--mouse-y),
      rgba(59, 130, 246, 0.12),
      transparent 40%
    );
  }

  /* Image styling */
  .card-image {
    filter: saturate(1.1) contrast(1.05);
  }

  .bento-card:hover .card-image {
    filter: saturate(1.2) contrast(1.1);
  }

  /* Featured cards get enhanced image visibility */
  .bento-card:nth-child(1) .card-image,
  .bento-card:nth-child(2) .card-image {
    object-position: center top;
  }
</style>

<script>
  // Spotlight Effect
  const cards = document.querySelectorAll('.bento-card');
  cards.forEach(card => {
    card.addEventListener('mousemove', (e) => {
      const rect = (card as HTMLElement).getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      (card as HTMLElement).style.setProperty('--mouse-x', `${x}px`);
      (card as HTMLElement).style.setProperty('--mouse-y', `${y}px`);
    });
  });
</script>
