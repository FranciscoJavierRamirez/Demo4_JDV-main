---
import { getEntry } from 'astro:content';

const areasData = await getEntry('areas', 'home');
const { sectionTitle, sectionSubtitle, areas } = areasData.data;
---

<section id="areas" class="relative py-24 bg-gradient-to-br from-white via-[#f0f9ff] to-[#faf5ff] overflow-hidden">
  <!-- Decorative mesh gradient background -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-1/4 left-1/4 w-[500px] h-[500px] rounded-full blur-[150px] opacity-[0.06] bg-[radial-gradient(circle,var(--blue-primary)_0%,transparent_70%)]"></div>
    <div class="absolute bottom-1/4 right-1/4 w-[400px] h-[400px] rounded-full blur-[120px] opacity-[0.05] bg-[radial-gradient(circle,var(--gold)_0%,transparent_70%)]"></div>
    <!-- Subtle grid pattern -->
    <div class="absolute inset-0 opacity-[0.02]" style="background-image: linear-gradient(var(--gray-400) 1px, transparent 1px), linear-gradient(90deg, var(--gray-400) 1px, transparent 1px); background-size: 60px 60px;"></div>
  </div>
  <div class="container relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="font-[var(--font-display)] text-[clamp(2rem,4vw,3rem)] font-extrabold text-[var(--gray-900)] mb-5 tracking-[-0.02em]">
        {sectionTitle}
      </h2>
      <p class="text-[clamp(1.125rem,2vw,1.25rem)] text-[var(--gray-600)] max-w-[700px] mx-auto leading-relaxed">
        {sectionSubtitle}
      </p>
    </div>

    <!-- Areas Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
      {areas.map((area, index) => (
        <a 
          href={area.link}
          class="group relative p-8 bg-white/95 backdrop-blur-sm border-2 border-[var(--gray-100)] rounded-[20px] transition-all duration-300 cursor-pointer overflow-hidden shadow-[var(--shadow-premium)] hover:border-[var(--blue-primary)] hover:-translate-y-2 hover:scale-[1.02] hover:shadow-[var(--shadow-premium-hover)] animate-on-scroll card-shine"
          style={`transition-delay: ${index * 50}ms`}
        >
          <!-- Top gradient bar on hover -->
          <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--blue-primary)] to-[var(--gold-primary)] scale-x-0 origin-left transition-transform duration-300 group-hover:scale-x-100"></div>
          
          <!-- Icon -->
          <div class="w-[72px] h-[72px] flex items-center justify-center bg-gradient-to-br from-[var(--blue-primary)] to-[var(--blue-dark)] rounded-2xl mb-5 transition-all duration-200 group-hover:bg-gradient-to-br group-hover:from-[var(--gold)] group-hover:to-[var(--gold-dark)] group-hover:scale-110 group-hover:-rotate-[5deg]">
            <i class={`${area.icon} text-[2rem] text-white`}></i>
          </div>
          
          <!-- Title -->
          <h3 class="font-[var(--font-display)] text-2xl font-bold text-[var(--gray-900)] mb-4 leading-tight">
            {area.title}
          </h3>
          
          <!-- Description -->
          <p class="text-[var(--gray-600)] leading-relaxed mb-5 text-[0.9375rem]">
            {area.description}
          </p>
          
          <!-- Link -->
          <span class="text-[var(--blue-primary)] font-semibold inline-flex items-center gap-2 text-[0.9375rem] transition-all duration-150 group-hover:text-[var(--gold)]">
            Conocer m√°s 
            <i class="fas fa-arrow-right transition-transform duration-150 group-hover:translate-x-1"></i>
          </span>
        </a>
      ))}
    </div>
  </div>
</section>

<style>
  /* Scroll animation initialization */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
  }
  
  .animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1), 
                transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }
</style>

<script>
  // Scroll animation observer
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));
</script>
