---
import { getEntry } from 'astro:content';

const heroData = await getEntry('home', 'hero');
const { badge, title, subtitle, cta, trust, floatingCards, scrollIndicator, images } = heroData.data;

// Process Markdown bold syntax to HTML strong tags
const processedSubtitle = subtitle.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
---

<section id="hero" class="relative min-h-screen flex items-center pt-24 pb-16 lg:pt-28 lg:pb-20 overflow-hidden bg-gradient-to-br from-[#0077C8] to-[#1A4D7A]">
  <!-- Background Image -->
  <img 
    src={images.background} 
    alt="Oficina jurÃ­dica moderna JDV" 
    class="absolute inset-0 w-full h-full object-cover z-[1] blur-[2px] brightness-90 saturate-95 scale-105"
  />
  
  <!-- Overlay for legibility -->
  <div class="absolute inset-0 z-[2] bg-gradient-to-r from-[rgba(12,35,64,0.95)] via-[rgba(12,35,64,0.90)] to-[rgba(26,77,122,0.85)]"></div>

  <!-- Animated Orbs -->
  <div class="absolute inset-0 z-[3] overflow-hidden pointer-events-none">
    <div class="absolute w-[400px] h-[400px] md:w-[500px] md:h-[500px] rounded-full blur-[100px] opacity-20 -top-[100px] -right-[100px] bg-[radial-gradient(circle,var(--gold)_0%,transparent_70%)] animate-[float_25s_ease-in-out_infinite]"></div>
    <div class="absolute w-[300px] h-[300px] md:w-[400px] md:h-[400px] rounded-full blur-[100px] opacity-20 -bottom-[100px] -left-[100px] bg-[radial-gradient(circle,var(--gold-light)_0%,transparent_70%)] animate-[float_25s_ease-in-out_infinite_8s]"></div>
  </div>

  <!-- Main Container -->
  <div class="relative z-10 w-full max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 lg:grid-cols-[1fr_0.9fr] gap-10 lg:gap-16 items-center">
      
      <!-- Hero Content - Always first on mobile -->
      <div class="text-white">
        <!-- Badge -->
        <div class="inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-lg rounded-full border border-white/20 text-sm font-semibold mb-6 shadow-lg">
          <i class={`${badge.icon} text-[var(--gold)] text-base`}></i>
          <span class="leading-tight">{badge.text}</span>
        </div>

        <!-- Title -->
        <h1 class="font-[var(--font-display)] text-[clamp(2.25rem,5vw,3.75rem)] font-black leading-[1.05] mb-6 tracking-[-0.02em]">
          <span class="block text-white drop-shadow-[0_2px_8px_rgba(0,0,0,0.4)]">
            {title.line1}
          </span>
          <span class="inline-block bg-gradient-to-br from-white to-[var(--gold-light)] bg-clip-text text-transparent">
            {title.line2}
          </span>
        </h1>

        <!-- Subtitle -->
        <p 
          class="text-base sm:text-lg leading-relaxed text-white/90 mb-8 max-w-[560px] [&_strong]:font-semibold [&_strong]:text-[var(--gold-light)]"
          set:html={processedSubtitle}
        ></p>

        <!-- CTAs - Prominent placement -->
        <div class="flex flex-col sm:flex-row gap-4 mb-10">
          <button 
            class="group relative px-8 py-4 text-base bg-[var(--gold-gradient)] text-[var(--gray-900)] border-none rounded-xl font-bold shadow-[var(--shadow-gold)] overflow-hidden transition-all duration-200 hover:translate-y-[-2px] hover:scale-[1.02] active:scale-[0.98]"
            onclick={cta.primary.action}
          >
            <span class="absolute top-0 -left-full w-full h-full bg-gradient-to-r from-transparent via-white/40 to-transparent animate-[shimmer_3s_infinite] z-[1]"></span>
            <span class="relative z-[2]">{cta.primary.text}</span>
            <i class="fas fa-arrow-right relative z-[2] ml-2"></i>
          </button>
          
          <a 
            href={cta.secondary.href} 
            class="px-8 py-4 text-base bg-white/10 backdrop-blur-lg text-white border-2 border-white/30 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all duration-200 hover:bg-white/20 hover:border-white/50"
          >
            <i class={cta.secondary.icon}></i>
            <span>{cta.secondary.text}</span>
          </a>
        </div>

        <!-- Trust Items - Single row on desktop -->
        <div class="flex flex-wrap gap-3 lg:gap-4">
          {trust.map(item => (
            <div class={`flex items-center gap-2 px-3 py-2 rounded-lg ${item.featured ? 'bg-gradient-to-br from-[var(--gold)] to-[var(--gold-light)] shadow-[0_4px_16px_rgba(201,169,97,0.3)]' : 'bg-white/10 backdrop-blur-sm border border-white/10'}`}>
              <div class={`w-8 h-8 flex items-center justify-center rounded-lg flex-shrink-0 ${item.featured ? 'bg-white/25' : 'bg-white/10'}`}>
                <i class={`${item.icon} text-base ${item.featured ? 'text-white' : 'text-[var(--gold)]'}`}></i>
              </div>
              <div class={item.featured ? 'text-white' : ''}>
                <strong class="block text-sm font-bold leading-none">{item.title}</strong>
                <span class={`text-xs ${item.featured ? 'text-white/90' : 'text-white/70'}`}>{item.subtitle}</span>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- Hero Visual - Image with floating cards -->
      <div class="relative hidden lg:block">
        <!-- Main Image Container -->
        <div class="relative mx-auto w-full max-w-[380px] xl:max-w-[420px]">
          <!-- Image Frame -->
          <div class="relative aspect-[3/4] rounded-2xl overflow-hidden shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] bg-white/5">
            <img 
              src={images.hero}
              alt={images.heroAlt}
              class="w-full h-full object-cover object-top"
            />
            <!-- Subtle gradient overlay -->
            <div class="absolute inset-0 bg-gradient-to-t from-[rgba(12,35,64,0.3)] via-transparent to-transparent pointer-events-none"></div>
          </div>

          <!-- Floating Card 1 - Bottom Left -->
          <div 
            class="absolute -bottom-4 -left-8 bg-white rounded-xl p-3 shadow-[0_20px_40px_rgba(0,0,0,0.15)] flex items-center gap-3 animate-[floatCard_6s_ease-in-out_infinite]"
          >
            <div class="w-10 h-10 flex items-center justify-center bg-gradient-to-br from-[var(--blue-primary)] to-[var(--blue-dark)] rounded-lg flex-shrink-0">
              <i class={`${floatingCards[0].icon} text-white`}></i>
            </div>
            <div>
              <div class="text-xl font-extrabold text-[var(--gray-900)] leading-none font-[var(--font-display)]">{floatingCards[0].number}</div>
              <div class="text-xs text-[var(--gray-500)] font-medium">{floatingCards[0].label}</div>
            </div>
          </div>

          <!-- Floating Card 2 - Top Right -->
          <div 
            class="absolute -top-4 -right-8 bg-white rounded-xl p-3 shadow-[0_20px_40px_rgba(0,0,0,0.15)] flex items-center gap-3 animate-[floatCard_6s_ease-in-out_infinite]"
            style="animation-delay: 3s;"
          >
            <div class="w-10 h-10 flex items-center justify-center bg-gradient-to-br from-[var(--gold)] to-[var(--gold-dark)] rounded-lg flex-shrink-0">
              <i class={`${floatingCards[1].icon} text-white`}></i>
            </div>
            <div>
              <div class="text-xl font-extrabold text-[var(--gray-900)] leading-none font-[var(--font-display)]">{floatingCards[1].number}</div>
              <div class="text-xs text-[var(--gray-500)] font-medium">{floatingCards[1].label}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll Indicator -->
  <button 
    class="absolute bottom-6 left-1/2 -translate-x-1/2 z-10 flex flex-col items-center gap-2 text-white opacity-80 cursor-pointer transition-all duration-200 hover:opacity-100 hover:translate-y-[2px] bg-transparent border-none"
    onclick={`document.getElementById('${scrollIndicator.target.slice(1)}').scrollIntoView({behavior: 'smooth'})`}
  >
    <div class="w-10 h-10 flex items-center justify-center bg-white/10 backdrop-blur-lg border border-white/20 rounded-full animate-[bounceArrow_2s_ease-in-out_infinite]">
      <i class="fas fa-chevron-down text-lg text-[var(--gold)]"></i>
    </div>
    <span class="text-xs font-semibold tracking-wider uppercase">{scrollIndicator.text}</span>
  </button>
</section>

<style>
  h1 {
    font-family: var(--font-display);
  }
</style>
