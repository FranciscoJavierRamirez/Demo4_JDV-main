---
// Mega Menu data - 3 columnas balanceadas
const columns = [
  {
    title: "Áreas Principales",
    items: [
      { href: "/areas-practicas/defensa-estatutaria", icon: "fas fa-shield-alt", title: "Defensa Estatutaria", desc: "Protección de funcionarios públicos", featured: true },
      { href: "/areas-practicas/defensa-administrativa", icon: "fas fa-building", title: "Defensa Administrativa", desc: "Representación ante órganos públicos", featured: true },
      { href: "/areas-practicas/inmobiliaria-copropiedad", icon: "fas fa-home", title: "Inmobiliaria y Copropiedad", desc: "Compraventa y copropiedad", featured: true }
    ]
  },
  {
    title: "Áreas Complementarias",
    items: [
      { href: "/areas-practicas/defensa-penal", icon: "fas fa-gavel", title: "Defensa Penal", desc: "Víctimas e imputados" },
      { href: "/areas-practicas/familia-menores", icon: "fas fa-users", title: "Familia y Menores", desc: "Divorcios, tuiciones y alimentos" },
      { href: "/areas-practicas/civil", icon: "fas fa-balance-scale", title: "Civil", desc: "Cobranzas y litigios civiles" },
      { href: "/areas-practicas/migraciones-extranjeria", icon: "fas fa-passport", title: "Migraciones", desc: "Visas, residencia y extranjería" }
    ]
  },
  {
    title: "Otros Servicios",
    items: [
      { href: "/areas-practicas/capacitacion", icon: "fas fa-chalkboard-teacher", title: "Capacitación", desc: "Cursos y talleres para organizaciones" }
    ]
  }
];
---

<!-- Mega Menu - Fixed position below nav -->
<div 
  id="megaMenu"
  class="mega-menu-overlay fixed top-[72px] left-0 right-0 z-[1001] opacity-0 invisible -translate-y-2 transition-all duration-300 ease-[cubic-bezier(0.16,1,0.3,1)] pointer-events-none"
>
  <div class="max-w-[1200px] mx-auto px-4">
    <div class="bg-white border border-[var(--gray-100)] rounded-2xl shadow-[0_25px_50px_rgba(0,0,0,0.15),0_10px_20px_rgba(0,0,0,0.08)] overflow-hidden">
      <div class="p-6 lg:p-8">
        <!-- Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8">
          {columns.map((col, colIndex) => (
            <div class="flex flex-col">
              {col.title && (
                <h3 class="font-[var(--font-display)] text-xs font-bold uppercase tracking-[0.1em] text-[var(--gray-400)] mb-3 pb-2 border-b border-[var(--gray-100)]">
                  {col.title}
                </h3>
              )}
              <ul class="list-none flex flex-col gap-1">
                {col.items.map(item => (
                  <li>
                    <a 
                      href={item.href} 
                      class="mega-link flex items-center gap-3 p-2.5 rounded-xl bg-transparent transition-all duration-200 no-underline hover:bg-[var(--gray-50)] group"
                    >
                      <div class="w-9 h-9 flex items-center justify-center bg-gradient-to-br from-[var(--blue-primary)] to-[var(--blue-dark)] rounded-lg flex-shrink-0 transition-all duration-300 group-hover:scale-105 group-hover:shadow-md group-hover:from-[var(--gold)] group-hover:to-[var(--gold-dark)]">
                        <i class={`${item.icon} text-white text-sm`}></i>
                      </div>
                      <div>
                        <strong class="flex items-center gap-1.5 text-[var(--gray-900)] font-semibold text-sm group-hover:text-[var(--gold-dark)] transition-colors">
                          {item.title}
                          {item.featured && <span class="text-[0.6rem] px-1.5 py-0.5 bg-[var(--gold)]/10 text-[var(--gold)] rounded-full font-bold">★</span>}
                        </strong>
                        <span class="text-[var(--gray-500)] text-xs">{item.desc}</span>
                      </div>
                    </a>
                  </li>
                ))}
              </ul>

              {/* Pro Bono Highlight in last column - Green theme */}
              {colIndex === 2 && (
                <div class="mt-3 p-3 bg-gradient-to-br from-[rgba(16,185,129,0.1)] to-[rgba(5,150,105,0.05)] rounded-xl border border-[rgba(16,185,129,0.25)]">
                  <div class="flex items-start gap-2.5">
                    <div class="w-8 h-8 flex items-center justify-center bg-gradient-to-br from-[#10b981] to-[#059669] rounded-lg flex-shrink-0">
                      <i class="fas fa-hand-holding-heart text-white text-sm"></i>
                    </div>
                    <div class="flex-1">
                      <strong class="block text-[var(--gray-900)] font-bold text-sm mb-0.5">Pro Bono</strong>
                      <a href="/#probono" class="inline-flex items-center gap-1 text-[#059669] font-semibold text-xs hover:text-[#10b981] transition-colors">
                        ¿Calificas? <i class="fas fa-arrow-right text-[0.6rem]"></i>
                      </a>
                    </div>
                  </div>
                </div>
              )}
            </div>
          ))}
        </div>

        <!-- Footer -->
        <div class="mt-6 pt-4 border-t border-[var(--gray-100)]">
          <div class="flex flex-wrap items-center justify-between gap-4">
            <div class="flex items-center gap-5 text-sm">
              <div class="flex items-center gap-2 text-[var(--gray-600)]">
                <i class="fas fa-phone-alt text-[var(--blue-primary)] text-xs"></i>
                <span>+56 9 4169 2900</span>
              </div>
              <div class="flex items-center gap-2 text-[var(--gray-600)]">
                <i class="fas fa-clock text-[var(--blue-primary)] text-xs"></i>
                <span>Respuesta &lt;24h</span>
              </div>
            </div>
            <a
              href="/#areas"
              class="inline-flex items-center gap-2 px-4 py-2 bg-[var(--blue-primary)] text-white rounded-lg font-semibold text-sm transition-all duration-200 hover:bg-[var(--blue-dark)] hover:-translate-y-0.5 hover:shadow-lg"
            >
              Ver todas
              <i class="fas fa-arrow-right text-xs"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .mega-menu-overlay.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    pointer-events: auto;
  }
</style>
